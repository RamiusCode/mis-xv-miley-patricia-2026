---
// ConfirmarAsistencia.astro
---

<section class="relative w-full overflow-hidden">
    <!-- Separador dorado arriba -->
    <div class="w-full">
        <img
            src="/imagenes/separadordorado.png"
            alt=""
            class="w-full h-auto block"
        />
    </div>

    <!-- Contenido principal sin fondo -->
    <div class="relative w-full py-6 px-4">
        <div class="max-w-2xl mx-auto flex items-center gap-4">
            <!-- Copa izquierda solo -->
            <div class="flex-shrink-0" id="copa-img">
                <img
                    src="/imagenes/copa.png"
                    alt="Copas decorativas"
                    class="w-20 sm:w-24 md:w-28 lg:w-32 h-auto object-contain"
                />
            </div>

            <!-- Centro: botón + texto -->
            <div
                class="flex flex-col items-center gap-3 flex-1"
                id="centro-asistencia"
            >
                <!-- Botón confirmar asistencia (imagen) -->
                <!-- Botón confirmar asistencia (imagen) -->
                <a
                    href="https://wa.link/65v0cc"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    <img
                        src="/imagenes/boton.png"
                        alt="Confirmar Asistencia"
                        class="w-44 sm:w-52 md:w-60 h-auto object-contain cursor-pointer hover:scale-105 transition-transform duration-200"
                    />
                </a>
                <!-- Texto -->
                <p
                    class="font-charm text-lg sm:text-xl md:text-2xl text-[#eb8fa3] leading-relaxed text-center"
                >
                    No olvides enviar un mensaje<br />para confirmar tu
                    asistencia
                </p>
            </div>
        </div>
    </div>

    <!-- Separador dorado abajo -->
    <div class="w-64 mx-auto">
        <img
            src="/imagenes/separadorado.png"
            alt=""
            class="w-full h-auto block"
        />
    </div>
</section>

<script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    gsap.registerPlugin(ScrollTrigger);

    document.addEventListener("DOMContentLoaded", () => {
        gsap.set("#copa-img", { opacity: 0, x: -40 });
        gsap.set("#centro-asistencia", { opacity: 0, y: 20, scale: 0.95 });

        ScrollTrigger.create({
            trigger: "#centro-asistencia",
            start: "top 90%",

            onEnter: () => {
                const tl = gsap.timeline();

                tl.to(
                    "#copa-img",
                    {
                        opacity: 1,
                        x: 0,
                        duration: 1,
                        ease: "power3.out",
                    },
                    0,
                ).to(
                    "#centro-asistencia",
                    {
                        opacity: 1,
                        y: 0,
                        scale: 1,
                        duration: 0.9,
                        ease: "back.out(1.3)",
                    },
                    0,
                );
            },

            onLeaveBack: () => {
                gsap.to(["#copa-img", "#centro-asistencia"], {
                    opacity: 0,
                    duration: 0.4,
                    ease: "power2.in",
                });
                gsap.to("#copa-img", { x: -40, duration: 0.4 });
                gsap.to("#centro-asistencia", {
                    y: 20,
                    scale: 0.95,
                    duration: 0.4,
                });
            },
        });
    });
</script>
